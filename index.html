<link rel="stylesheet" type="text/css" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
<link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-multiselect/0.9.13/css/bootstrap-multiselect.css">
<script src="https://unpkg.com/popper.js/dist/umd/popper.min.js"></script>
<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-multiselect/0.9.13/js/bootstrap-multiselect.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script src="https://rawgit.com/RickStrahl/jquery-resizable/master/src/jquery-resizable.js"></script>
<script src="crmTable.html" type="riot/tag"></script>

<script type="text/javascript" src="https://rawgit.com/riot/riot/master/riot%2Bcompiler.min.js"></script>
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css">
<link rel="stylesheet" href="styles.css">

<script>
    globalInfo = { tags: {}, items: [] }
    globalView = 'CRM';
    archiveInfo = [];
    archivedTag = {};
    //TO-DO find alternative to this global used id
    lastModified = new Date(0);

    function saveItems() {
        $.get("utils.php", { requestType: "write", records: JSON.stringify(globalInfo), token: new Date().getTime() }, (data) => {
            console.log(data);
        });
    }

    function getTag(i) {
        return globalInfo.tags[i];
    }

    function getTagWithName(name) {
        for (key in globalInfo.tags)
            if (globalInfo.tags[key].name == name)
                return globalInfo.tags[key];

        return undefined;
    }

    function getTagsName(){
        var names = []
        for (key in globalInfo.tags)
            names.push(globalInfo.tags[key].name);
        return names;
    }

    function onlyUnique(value, index, self) {
        return self.indexOf(value) === index;
    }

    function getLastId() {
        if (globalInfo.items.length == 0) return 0;
        return Math.max(...globalInfo.items.map(e => e.id));
    }

</script>

<crmTable></crmTable>

<script>
    riot.mount('*');
</script>